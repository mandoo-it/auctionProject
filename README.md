# AuctionProject

# ğŸ‘– ë¯¸ë‹ˆ ì›¹í”„ë¡œì íŠ¸2 - ì¤‘ê³  ë¬¼í’ˆ ê²½ë§¤ ì›¹ì‚¬ì´íŠ¸ğŸ‘–

## ëª©ì°¨

- [ê°œìš” ë° íŒ€ ì†Œê°œ](#ê°œìš”)
- [ì§„í–‰ ê³¼ì •](#í”„ë¡œì íŠ¸-ì§„í–‰-ê³¼ì •)
- [êµ¬í˜„ í™”ë©´](#êµ¬í˜„-í˜ì´ì§€)

## ê°œìš”

- í”„ë¡œì íŠ¸ ì´ë¦„: ì¤‘ê³  ë¬¼í’ˆ ê²½ë§¤ ì›¹ì‚¬ì´íŠ¸
- í”„ë¡œì íŠ¸ ëª©ì  :

  - 1ì°¨ í”„ë¡œì íŠ¸ë•Œ ì£¼ì œê°€ ëª…í™•í•˜ì§€ ì•Šì•„ ë³€ê²½
  - í•œì •íŒ ê°™ì€ ë¬¼ê±´ë“¤ì„ ê²½ë§¤ì‚¬ì´íŠ¸ì— ì˜¬ë¦¼ìœ¼ë¡œ ì†Œë¹„ì, êµ¬ë§¤ì ëª¨ë‘ ë§Œì¡± ê°€ëŠ¥
- í”„ë¡œì íŠ¸ ê¸°ê°„: 2023.11.26 - 2013.11.02
- ê°œë°œ ì—”ì§„ ë° ì–¸ì–´: Python Flask, React, MySQL, Docker, Kubernetes
- ë©¤ë²„: ê¹€ìƒí›ˆ, ìœ¤ê·œí¬, ìœ¤ì„í˜„, ìµœì¸í˜, ì „ê²½ì›

## ğŸ‘¨â€ğŸ‘¨â€ğŸ‘¦ íŒ€ì†Œê°œ

|                                                                                                                            ê¹€ìƒí›ˆ                                                                                                                            |                                                                                                                                        ìœ¤ê·œí¬                                                                                                                                        |                                                               ìœ¤ì„í˜„                                                               |                                                            ìµœì¸í˜                                                            |                                                            ì „ê²½ì›                                                            |
| :-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: | :-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: | :---------------------------------------------------------------------------------------------------------------------------------: | :---------------------------------------------------------------------------------------------------------------------------: | :---------------------------------------------------------------------------------------------------------------------------: |
| ![Static Badge](https://img.shields.io/badge/íŒ€ì¥-%23FE642E) ![Static Badge](https://img.shields.io/badge/ê²½ë§¤í˜ì´ì§€-%235882FA) ![Static Badge](https://img.shields.io/badge/ë§ˆì´í˜ì´ì§€-%235882FA) ![Static Badge](https://img.shields.io/badge/ë°°í¬ìë™í™”-%235882FA) | ![Static Badge](https://img.shields.io/badge/ë¡œê·¸ì¸&íšŒì›ê°€ì…-%235882FA)  ![Static Badge](https://img.shields.io/badge/Backend-%235882FA)    ![Static Badge](https://img.shields.io/badge/ì‹¤ì‹œê°„ë°ì´í„°ì—…ë°ì´íŠ¸-%232552FA) ![Static Badge](https://img.shields.io/badge/ì´ë¯¸ì§€ì—…ë¡œë“œ-%232552FA) | ![Static Badge](https://img.shields.io/badge/ë§ˆì´í˜ì´ì§€-%235882FA)  ![Static Badge](https://img.shields.io/badge/gití˜•ìƒê´€ë¦¬-1235882FA) | ![Static Badge](https://img.shields.io/badge/ë©”ì¸í˜ì´ì§€-%235882FA) ![Static Badge](https://img.shields.io/badge/ë””ìì¸-1235882FA) | ![Static Badge](https://img.shields.io/badge/ë””ìì¸-%235882FA) ![Static Badge](https://img.shields.io/badge/ë°°í¬ìë™í™”-1235882FA) |

### âš™ï¸ ê¸°ìˆ  ìŠ¤íƒ

#### FRONTEND

![React](https://img.shields.io/badge/react-%2320232a.svg?style=for-the-badge&logo=react&logoColor=%2361DAFB)

#### BACKEND

![Python](https://img.shields.io/badge/python-3670A0?style=for-the-badge&logo=python&logoColor=ffdd54)
![MySQL](https://img.shields.io/badge/mysql-%2300f.svg?style=for-the-badge&logo=mysql&logoColor=white)

#### ìë™ ë°°í¬í™” ë„êµ¬

<img src="https://img.shields.io/badge/Docker-2496ED?style=flat-square&logo=Docker&logoColor=white"/>

![Kubernetes](https://img.shields.io/badge/kubernetes-%23326ce5.svg?style=for-the-badge&logo=kubernetes&logoColor=white)

## í”„ë¡œì íŠ¸ ì§„í–‰ ê³¼ì •

|       ì¼ë³„       | ë‚´ìš©                                                                   |
| :--------------: | ---------------------------------------------------------------------- |
|  1ì¼ì°¨ `<br>`  | - ì£¼ì œ ì„ ì •, ê¸°ìˆ  ìŠ¤íƒ ê²°ì •, ë°ì´í„° ë² ì´ìŠ¤ ì„¤ê³„                        |
| 2~6ì¼ì°¨ `<br>` | - CRUD ê¸°ëŠ¥ ê°œë°œ                                                       |
|  7ì¼ì°¨ `<br>`  | - ë„ì»¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ê³ , ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ í†µí•´ í´ëŸ¬ìŠ¤í„°ì— ë°°í¬ |
|  8ì¼ì°¨ `<br>`  | - í”„ë¡œì íŠ¸ ë³´ê³ ì„œ ì‘ì„± ë° ë°œí‘œ                                         |

## í”„ë¡œì íŠ¸ êµ¬ì¡° ë° íŠ¹ì§•

### ER DIAGRAM

![1698895705067](image/README/1698895705067.png)

### BACKEND

- APIëª…ì„ ì¹´ë©œ ì¼€ì´ìŠ¤ë¡œ ì •ì˜í•˜ì—¬ ë„¤ì´ë° ì»¨ë²¤ì…˜ì„ ì§€í‚¤ë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.

```
ğŸ“¦backend
 â”£ ğŸ“‚node_modules
 â”ƒ â”£ ğŸ“‚flask-cors
 â”ƒ â”ƒ â”— ğŸ“œpackage.json
 â”ƒ â”— ğŸ“œ.package-lock.json
 â”£ ğŸ“‚resources # í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì‚¬ìš©ìê°€ ì—…ë¡œë“œí•œ ì´ë¯¸ì§€ë¥¼ ì €ì¥
 â”ƒ â”£ ğŸ“œimage.jpeg
 â”ƒ â”£ ğŸ“œme.png
 â”ƒ â”£ ğŸ“œê¹€ìƒí›ˆ.JPEG
 â”ƒ â”£ ğŸ“œìš°ì˜ë¯¸.JPEG
 â”ƒ â”— ğŸ“œìº¡ì²˜.JPG
 â”£ ğŸ“‚__pycache__
 â”ƒ â”— ğŸ“œdatabase.cpython-312.pyc
 â”£ ğŸ“œapp.py
 â”£ ğŸ“œdatabase.py
 â”£ ğŸ“œDockerfile-flask
 â”£ ğŸ“œDockerfile-mysql
 â”£ ğŸ“œhistoryUpdate.py #ì£¼ê¸°ì ìœ¼ë¡œ ë‚™ì°°ë‚´ì—­ì„ ì—…ë°ì´íŠ¸í•˜ëŠ” cronì— ì‚¬ìš©ë˜ëŠ” íŒŒì¼
 â”£ ğŸ“œinit.sql
 â”— ğŸ“œrequirements.txt
```

- `JWT`ì„ ë§Œë“¤ì–´ì„œ ë¡œê·¸ì¸ ì •ë³´ ìˆì„ ì‹œ `localStorage`ì— ì €ì¥ -
  - ì´ ë°©ë²•ì€ ë³´ì•ˆ ìƒ ì·¨ì•½ -> Access Tokenì„ ìœ íš¨ ê¸°ê°„ì„ ì§§ê²Œ ì„¤ì •í•˜ê³ ,  ë§Œë£Œë˜ë©´ Refresh Tokenì„ ë°œê¸‰ë°›ë„ë¡ í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ê°œì„  ê°€

```python
from flask_jwt_extended import JWTManager
from flask_jwt_extended import create_access_token
import os


app.config["JWT_SECRET_KEY"] = "super-secret"
app.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER
jwt = JWTManager(app)

@app.route('/login', methods = ["GET", "POST"])
def login():
    if request.method == 'POST':
        userId = request.json.get('id')
        password = request.json.get('password')
   
        isid = database.idCheck(userId, password)
        if(isid) :
            access_token = create_access_token(identity=userId)
            return jsonify({'token': access_token, 'userId':userId}), 200
        else : 
            return jsonify({'message': 'ì˜ëª»ëœ ë¡œê·¸ì¸ ì •ë³´ì…ë‹ˆë‹¤. ë‹¤ì‹œ ì…ë ¥í•´ì£¼ì„¸ìš”.'}), 401

``` 
- ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì£¼ê¸°ì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ìë™í™” ì‘ì—…
- ë§¤ë¶„ ë§¤ì´ˆì— crontabì„ ì‹¤í–‰í•˜ë©° ê²½ë§¤ ë‚´ì—­ì— ìˆëŠ” ë°ì´í„°ì˜ ë§Œë£Œì‹œê°„ì´ í˜„ì¬ì‹œê°„ì„ ì§€ë‚¬ì„ ê²½ìš° history(ë‚™ì°° í…Œì´ë¸”)ì— ìë™ìœ¼ë¡œ ë„£ëŠ” python íŒŒì¼ ì‹¤í–‰í•œë‹¤. 
    - frontendì—ì„œë„ í˜„ì¬ì‹œê°„ì„ ì§€ë‚¬ìœ¼ë©´ ë‚™ì°° ëª»í•˜ê²Œ ë²„íŠ¼ ë¹„í™œì„±í™”í•˜ê²Œ ê°œì„  ê°€ëŠ¥ 
 
``` docker
RUN crontab -l | { cat; echo "* * * * * /usr/local/bin/python /app/historyUpdate.py >> /var/log/cron.log 2>&1"; } | crontab -
```

- backend resourceì— ì´ë¯¸ì§€ ì €ì¥ 
    - ì„¤ì • ë³€ìˆ˜ì— ë„£ì–´ë†“ì€ ì ˆëŒ€ ê²½ë¡œì— ì´ë¯¸ì§€ ì €ì¥
    - ë°ì´í„°ë² ì´ìŠ¤ì— ë„£ì„ ë•ŒëŠ” í•´ë‹¹ íŒŒì¼ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” URLì„ ìƒì„± í›„ INSERT
    
``` python
file.save(os.path.join(app.config['UPLOAD_FOLDER'], file.filename))
image_url = 'http://10.0.0.9:5000/resources/' + file.filename

```
### FRONTEND

- ì»´í¬ë„ŒíŠ¸ì™€ í˜ì´ì§€ë¥¼ ë¶„ë¦¬í•¨ìœ¼ë¡œ, ì—¬ëŸ¬ í˜ì´ì§€ì—ì„œ ì‚¬ìš©ëŠ” ì¹´ë“œ, í—¤ë” ë“±ì„ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

```
ğŸ“¦src
 â”£ ğŸ“‚components
 â”ƒ â”£ ğŸ“œCard.js
 â”ƒ â”£ ğŸ“œCard.module.css
 â”ƒ â”£ ğŸ“œCreatePage.module.css
 â”ƒ â”£ ğŸ“œDetailPage.module.css
 â”ƒ â”£ ğŸ“œFooter.js
 â”ƒ â”£ ğŸ“œFooter.module.css
 â”ƒ â”£ ğŸ“œHeader.js
 â”ƒ â”£ ğŸ“œHeader.module.css
 â”ƒ â”£ ğŸ“œLoginPage.module.css
 â”ƒ â”£ ğŸ“œMainPage.module.css
 â”ƒ â”— ğŸ“œMyPage.module.css
 â”£ ğŸ“‚pages
 â”ƒ â”£ ğŸ“œCreatePage.js
 â”ƒ â”£ ğŸ“œDetailPage.js
 â”ƒ â”£ ğŸ“œLoginPage.js
 â”ƒ â”£ ğŸ“œMainPage.js
 â”ƒ â”£ ğŸ“œMyPage.js
 â”ƒ â”— ğŸ“œSignupPage.js
 â”£ ğŸ“œApp.css
 â”£ ğŸ“œApp.js
 â”£ ğŸ“œApp.test.js
 â”£ ğŸ“œindex.css
 â”£ ğŸ“œindex.js
 â”£ ğŸ“œlogo.svg
 â”£ ğŸ“œreportWebVitals.js
 â”— ğŸ“œsetupTests.js
```

- Axiosë¥¼ ì‚¬ìš©í•˜ì—¬ ì„œë²„ì™€ì˜ HTTP ìš”ì²­ì„ ë§Œë“¤ê³  ì‘ë‹µì„ ì²˜ë¦¬

```javascript
axios
      .put(`http://10.0.0.9:5000/detail/${id}`, { price: price })
      .then((response) => {
        setData({ ...data, price: price });
        console.log("ê°€ê²©ì´ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.");

        const datas = new FormData();
        datas.append('itemId', data.id);
        datas.append('userId', purchaseId);
        datas.append('endTime', data.endTime);
        console.log(data.id)
        console.log(purchaseId)

        return axios.post(`http://10.0.0.9:5000/history`, datas);
      })
      .catch((error) => {
        console.error(error);
      });
```
- async/await: asyncí•¨ìˆ˜ ë‚´ë¶€ì—ì„œ awaitë¡œ ì„œë²„ì™€ í†µì‹ í•˜ê³  promiseê°€ ëë‚˜ë©´ 
ì²˜ë¦¬ ê²°ê³¼ì— ë”°ë¼ ë‹¤ë¥¸ ê²°ê³¼ ë°˜í™˜
- ë¹„ë™ê¸° í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¤ë¥¸ ì‘ì—…ì„ ë³‘ë ¬ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆì–´ ì‹œìŠ¤í…œ ì„±ëŠ¥ í–¥ìƒ ê°€ëŠ¥ 


```javascript

 const handlerLogin = async () => {
    try {
      const response = await fetch(`http://10.0.0.9:5000/login`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ id, password })
      });
      console.log(response)

      if (response.ok) {
        console.log('ë¡œê·¸ì¸ ì„±ê³µ! í† í°:', token);
      } else {
        console.log('ë¡œê·¸ì¸ ì‹¤íŒ¨!');
      }
    } catch (error) {
      console.error('ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
    }
};

```
