# AuctionProject

# ğŸ‘– ë¯¸ë‹ˆ ì›¹í”„ë¡œì íŠ¸2 - ì¤‘ê³  ë¬¼í’ˆ ê²½ë§¤ ì›¹ì‚¬ì´íŠ¸ğŸ‘–

## ëª©ì°¨

- [ê°œìš” ë° íŒ€ ì†Œê°œ](#ê°œìš”)
- [ì§„í–‰ ê³¼ì •](#í”„ë¡œì íŠ¸-ì§„í–‰-ê³¼ì •)
- [êµ¬í˜„ í™”ë©´](#êµ¬í˜„-í˜ì´ì§€)

## ê°œìš”

- í”„ë¡œì íŠ¸ ì´ë¦„: ì¤‘ê³  ë¬¼í’ˆ ê²½ë§¤ ì›¹ì‚¬ì´íŠ¸
- í”„ë¡œì íŠ¸ ëª©ì  :
  - 3ê³„ì¸µ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜(MSA) ë°°í¬
  - 1ì°¨ í”„ë¡œì íŠ¸ë•Œ ì£¼ì œê°€ ëª…í™•í•˜ì§€ ì•Šì•„ ë³€ê²½
  - í•œì •íŒ ê°™ì€ ë¬¼ê±´ë“¤ì„ ê²½ë§¤ì‚¬ì´íŠ¸ì— ì˜¬ë¦¼ìœ¼ë¡œ ì†Œë¹„ì, êµ¬ë§¤ì ëª¨ë‘ ë§Œì¡± ê°€ëŠ¥
- í”„ë¡œì íŠ¸ ê¸°ê°„: 2023.11.26 - 2013.11.02
- ê°œë°œ ì—”ì§„ ë° ì–¸ì–´: Python Flask, React, MySQL, Docker, Kubernetes
- ë©¤ë²„: ê¹€ìƒí›ˆ, ìœ¤ê·œí¬, ìœ¤ì„í˜„, ìµœì¸í˜, ì „ê²½ì›

## ğŸ‘¨â€ğŸ‘¨â€ğŸ‘¦ íŒ€ì†Œê°œ

|                                                                                                                            ê¹€ìƒí›ˆ                                                                                                                            |                                                                                                                                        ìœ¤ê·œí¬                                                                                                                                        |                                                               ìœ¤ì„í˜„                                                               |                                                            ìµœì¸í˜                                                            |                                                            ì „ê²½ì›                                                            |
| :-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: | :-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: | :---------------------------------------------------------------------------------------------------------------------------------: | :---------------------------------------------------------------------------------------------------------------------------: | :---------------------------------------------------------------------------------------------------------------------------: |
| ![Static Badge](https://img.shields.io/badge/íŒ€ì¥-%23FE642E) ![Static Badge](https://img.shields.io/badge/ê²½ë§¤í˜ì´ì§€-%235882FA) ![Static Badge](https://img.shields.io/badge/ë§ˆì´í˜ì´ì§€-%235882FA) ![Static Badge](https://img.shields.io/badge/ë°°í¬ìë™í™”-%235882FA) | ![Static Badge](https://img.shields.io/badge/ë¡œê·¸ì¸&íšŒì›ê°€ì…-%235882FA)  ![Static Badge](https://img.shields.io/badge/Backend-%235882FA)    ![Static Badge](https://img.shields.io/badge/ì‹¤ì‹œê°„ë°ì´í„°ì—…ë°ì´íŠ¸-%232552FA) ![Static Badge](https://img.shields.io/badge/ì´ë¯¸ì§€ì—…ë¡œë“œ-%232552FA) | ![Static Badge](https://img.shields.io/badge/ë§ˆì´í˜ì´ì§€-%235882FA)  ![Static Badge](https://img.shields.io/badge/gití˜•ìƒê´€ë¦¬-1235882FA) | ![Static Badge](https://img.shields.io/badge/ë©”ì¸í˜ì´ì§€-%235882FA) ![Static Badge](https://img.shields.io/badge/ë””ìì¸-1235882FA) | ![Static Badge](https://img.shields.io/badge/ë””ìì¸-%235882FA) ![Static Badge](https://img.shields.io/badge/ë°°í¬ìë™í™”-1235882FA) |

### âš™ï¸ ê¸°ìˆ  ìŠ¤íƒ

#### FRONTEND

![React](https://img.shields.io/badge/react-%2320232a.svg?style=for-the-badge&logo=react&logoColor=%2361DAFB)

#### BACKEND

![Python](https://img.shields.io/badge/python-3670A0?style=for-the-badge&logo=python&logoColor=ffdd54)
![MySQL](https://img.shields.io/badge/mysql-%2300f.svg?style=for-the-badge&logo=mysql&logoColor=white)

#### ìë™ ë°°í¬í™” ë„êµ¬

<img src="https://img.shields.io/badge/Docker-2496ED?style=flat-square&logo=Docker&logoColor=white"/>

![Kubernetes](https://img.shields.io/badge/kubernetes-%23326ce5.svg?style=for-the-badge&logo=kubernetes&logoColor=white)

## í”„ë¡œì íŠ¸ ì§„í–‰ ê³¼ì •

|       ì¼ë³„       | ë‚´ìš©                                                                   |
| :--------------: | ---------------------------------------------------------------------- |
|  1ì¼ì°¨ `<br>`  | - ì£¼ì œ ì„ ì •, ê¸°ìˆ  ìŠ¤íƒ ê²°ì •, ë°ì´í„° ë² ì´ìŠ¤ ì„¤ê³„                        |
| 2~6ì¼ì°¨ `<br>` | - CRUD ê¸°ëŠ¥ ê°œë°œ                                                       |
|  7ì¼ì°¨ `<br>`  | - ë„ì»¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ê³ , ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ í†µí•´ í´ëŸ¬ìŠ¤í„°ì— ë°°í¬ |
|  8ì¼ì°¨ `<br>`  | - í”„ë¡œì íŠ¸ ë³´ê³ ì„œ ì‘ì„± ë° ë°œí‘œ                                         |

## í”„ë¡œì íŠ¸ êµ¬ì¡° ë° íŠ¹ì§•

### ER DIAGRAM

![1698895705067](image/README/1698895705067.png)

### BACKEND

- APIëª…ì„ ì¹´ë©œ ì¼€ì´ìŠ¤ë¡œ ì •ì˜í•˜ì—¬ ë„¤ì´ë° ì»¨ë²¤ì…˜ì„ ì§€í‚¤ë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.

```
ğŸ“¦backend
 â”£ ğŸ“‚node_modules
 â”ƒ â”£ ğŸ“‚flask-cors
 â”ƒ â”ƒ â”— ğŸ“œpackage.json
 â”ƒ â”— ğŸ“œ.package-lock.json
 â”£ ğŸ“‚resources # í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì‚¬ìš©ìê°€ ì—…ë¡œë“œí•œ ì´ë¯¸ì§€ë¥¼ ì €ì¥
 â”ƒ â”£ ğŸ“œimage.jpeg
 â”ƒ â”£ ğŸ“œme.png
 â”ƒ â”£ ğŸ“œê¹€ìƒí›ˆ.JPEG
 â”ƒ â”£ ğŸ“œìš°ì˜ë¯¸.JPEG
 â”ƒ â”— ğŸ“œìº¡ì²˜.JPG
 â”£ ğŸ“‚__pycache__
 â”ƒ â”— ğŸ“œdatabase.cpython-312.pyc
 â”£ ğŸ“œapp.py
 â”£ ğŸ“œdatabase.py
 â”£ ğŸ“œDockerfile-flask
 â”£ ğŸ“œDockerfile-mysql
 â”£ ğŸ“œhistoryUpdate.py #ì£¼ê¸°ì ìœ¼ë¡œ ë‚™ì°°ë‚´ì—­ì„ ì—…ë°ì´íŠ¸í•˜ëŠ” cronì— ì‚¬ìš©ë˜ëŠ” íŒŒì¼
 â”£ ğŸ“œinit.sql
 â”— ğŸ“œrequirements.txt
```

- `JWT`ì„ ë§Œë“¤ì–´ì„œ ë¡œê·¸ì¸ ì •ë³´ ìˆì„ ì‹œ `localStorage`ì— ì €ì¥ -
  - ì´ ë°©ë²•ì€ ë³´ì•ˆ ìƒ ì·¨ì•½ -> Access Tokenì„ ìœ íš¨ ê¸°ê°„ì„ ì§§ê²Œ ì„¤ì •í•˜ê³ ,  ë§Œë£Œë˜ë©´ Refresh Tokenì„ ë°œê¸‰ë°›ë„ë¡ í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ê°œì„  ê°€ëŠ¥

```python
from flask_jwt_extended import JWTManager
from flask_jwt_extended import create_access_token
import os


app.config["JWT_SECRET_KEY"] = "super-secret"
app.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER
jwt = JWTManager(app)

@app.route('/login', methods = ["GET", "POST"])
def login():
    if request.method == 'POST':
        userId = request.json.get('id')
        password = request.json.get('password')
   
        isid = database.idCheck(userId, password)
        if(isid) :
            access_token = create_access_token(identity=userId)
            return jsonify({'token': access_token, 'userId':userId}), 200
        else : 
            return jsonify({'message': 'ì˜ëª»ëœ ë¡œê·¸ì¸ ì •ë³´ì…ë‹ˆë‹¤. ë‹¤ì‹œ ì…ë ¥í•´ì£¼ì„¸ìš”.'}), 401

``` 
- ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì£¼ê¸°ì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ìë™í™” ì‘ì—…
- ë§¤ë¶„ ë§¤ì´ˆì— crontabì„ ì‹¤í–‰í•˜ë©° ê²½ë§¤ ë‚´ì—­ì— ìˆëŠ” ë°ì´í„°ì˜ ë§Œë£Œì‹œê°„ì´ í˜„ì¬ì‹œê°„ì„ ì§€ë‚¬ì„ ê²½ìš° history(ë‚™ì°° í…Œì´ë¸”)ì— ìë™ìœ¼ë¡œ ë„£ëŠ” python íŒŒì¼ ì‹¤í–‰í•œë‹¤. 
-  :collision: ì—ëŸ¬ í•´ê²° ê³¼ì •
    - crontab íŒŒì¼ì„ ë”°ë¡œ ë§Œë“¤ì–´ì„œ ë„ì»¤íŒŒì¼ì—ì„œ ì‹¤í–‰í•˜ê²Œí•¨ 
    ![1699260552779](image/README/1699260552779.png)
    
    - frontendì—ì„œë„ í˜„ì¬ì‹œê°„ì„ ì§€ë‚¬ìœ¼ë©´ ë‚™ì°° ëª»í•˜ê²Œ ë²„íŠ¼ ë¹„í™œì„±í™”í•˜ê²Œ ê°œì„  ê°€ëŠ¥ 
    - Kubernetesì˜ cronJobìœ¼ë¡œ ê°œì„ í•˜ë©´ ì¢‹ì„ë“¯ 
``` docker
RUN crontab -l | { cat; echo "* * * * * /usr/local/bin/python /app/historyUpdate.py >> /var/log/cron.log 2>&1"; } | crontab -
```
- ê²½ë§¤ ë‚™ì°° í›„ ë§Œë£Œ ì‹œê°„ì´ ì§€ë‚˜ë©´ ë§ˆì´í˜ì´ì§€ ê²½ë§¤ë‚´ì—­ì— ì¶”ê°€ ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤
![1699428031058](image/README/1699428031058.png)
![1699428079482](image/README/1699428079482.png)
![1699428148980](image/README/1699428148980.png)

- flask serviceë¡œ ì ‘ì†í•˜ì—¬ cronlogë¥¼ ë³´ë©´ 1ë¶„ë§ˆë‹¤ ìˆ˜í–‰ì´ ì˜ ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. 
![1699428557826](image/README/1699428557826.png)
![1699428579329](image/README/1699428579329.png)

- backend resourceì— ì´ë¯¸ì§€ ì €ì¥ 
    - ì„¤ì • ë³€ìˆ˜ì— ë„£ì–´ë†“ì€ ì ˆëŒ€ ê²½ë¡œì— ì´ë¯¸ì§€ ì €ì¥
    - ë°ì´í„°ë² ì´ìŠ¤ì— ë„£ì„ ë•ŒëŠ” í•´ë‹¹ íŒŒì¼ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” URLì„ ìƒì„± í›„ INSERT
    
``` python
file.save(os.path.join(app.config['UPLOAD_FOLDER'], file.filename))
image_url = 'http://10.0.0.9:5000/resources/' + file.filename

```
### FRONTEND

- ì»´í¬ë„ŒíŠ¸ì™€ í˜ì´ì§€ë¥¼ ë¶„ë¦¬í•¨ìœ¼ë¡œ, ì—¬ëŸ¬ í˜ì´ì§€ì—ì„œ ì‚¬ìš©ëŠ” ì¹´ë“œ, í—¤ë” ë“±ì„ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

```
ğŸ“¦src
 â”£ ğŸ“‚components
 â”ƒ â”£ ğŸ“œCard.js
 â”ƒ â”£ ğŸ“œCard.module.css
 â”ƒ â”£ ğŸ“œCreatePage.module.css
 â”ƒ â”£ ğŸ“œDetailPage.module.css
 â”ƒ â”£ ğŸ“œFooter.js
 â”ƒ â”£ ğŸ“œFooter.module.css
 â”ƒ â”£ ğŸ“œHeader.js
 â”ƒ â”£ ğŸ“œHeader.module.css
 â”ƒ â”£ ğŸ“œLoginPage.module.css
 â”ƒ â”£ ğŸ“œMainPage.module.css
 â”ƒ â”— ğŸ“œMyPage.module.css
 â”£ ğŸ“‚pages
 â”ƒ â”£ ğŸ“œCreatePage.js
 â”ƒ â”£ ğŸ“œDetailPage.js
 â”ƒ â”£ ğŸ“œLoginPage.js
 â”ƒ â”£ ğŸ“œMainPage.js
 â”ƒ â”£ ğŸ“œMyPage.js
 â”ƒ â”— ğŸ“œSignupPage.js
 â”£ ğŸ“œApp.css
 â”£ ğŸ“œApp.js
 â”£ ğŸ“œApp.test.js
 â”£ ğŸ“œindex.css
 â”£ ğŸ“œindex.js
 â”£ ğŸ“œlogo.svg
 â”£ ğŸ“œreportWebVitals.js
 â”— ğŸ“œsetupTests.js
```

- Axiosë¥¼ ì‚¬ìš©í•˜ì—¬ ì„œë²„ì™€ì˜ HTTP ìš”ì²­ì„ ë§Œë“¤ê³  ì‘ë‹µì„ ì²˜ë¦¬

```javascript
axios
      .put(`http://10.0.0.9:5000/detail/${id}`, { price: price })
      .then((response) => {
        setData({ ...data, price: price });
        console.log("ê°€ê²©ì´ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.");

        const datas = new FormData();
        datas.append('itemId', data.id);
        datas.append('userId', purchaseId);
        datas.append('endTime', data.endTime);
        console.log(data.id)
        console.log(purchaseId)

        return axios.post(`http://10.0.0.9:5000/history`, datas);
      })
      .catch((error) => {
        console.error(error);
      });
```
- async/await: asyncí•¨ìˆ˜ ë‚´ë¶€ì—ì„œ awaitë¡œ ì„œë²„ì™€ í†µì‹ í•˜ê³  promiseê°€ ëë‚˜ë©´ 
ì²˜ë¦¬ ê²°ê³¼ì— ë”°ë¼ ë‹¤ë¥¸ ê²°ê³¼ ë°˜í™˜
- ë¹„ë™ê¸° í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¤ë¥¸ ì‘ì—…ì„ ë³‘ë ¬ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆì–´ ì‹œìŠ¤í…œ ì„±ëŠ¥ í–¥ìƒ ê°€ëŠ¥ 


```javascript

 const handlerLogin = async () => {
    try {
      const response = await fetch(`http://10.0.0.9:5000/login`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ id, password })
      });
      console.log(response)

      if (response.ok) {
        console.log('ë¡œê·¸ì¸ ì„±ê³µ! í† í°:', token);
      } else {
        console.log('ë¡œê·¸ì¸ ì‹¤íŒ¨!');
      }
    } catch (error) {
      console.error('ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
    }
};

```

ì•ì„œ ë§Œë“¤ì—ˆë˜ React, Flask, Mysql Databaseë¥¼ ì´ìš©í•´ 3ê³„ì¸µ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜(MSA) ë°°í¬í•˜ì˜€ìŠµë‹ˆë‹¤. 


# Docker Container
## Mysql Database ì»¨í…Œì´ë„ˆí™”
### Databaseë¥¼ Mysql Workbenchì˜ Forwarding toolì„ í†µí•´ ER-DIAGRAMì—ì„œ DDL ì¶”ì¶œ
```sql
CREATE SCHEMA IF NOT EXISTS `auction` DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci ;
USE `auction` ;

-- -----------------------------------------------------
-- Table `auction`.`user`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `auction`.`user` (
  `id` VARCHAR(50) NOT NULL,
  `phone` VARCHAR(50) NOT NULL,
  `password` VARCHAR(50) NOT NULL,
  `nickname` VARCHAR(50) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;
-- -----------------------------------------------------
-- Table `auction`.`history`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `auction`.`history` (
  `id` int NOT NULL AUTO_INCREMENT,
  `user_id` varchar(50) NOT NULL,
  `item_id` int NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=27 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
-- -----------------------------------------------------
-- Table `auction`.`item`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `auction`.`item` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `endTime` DATETIME NOT NULL,
  `startTime` DATETIME NOT NULL,
  `name` VARCHAR(100) NOT NULL,
  `content` TEXT NULL DEFAULT NULL,
  `price` DOUBLE NOT NULL,
  `user_id` VARCHAR(50) NOT NULL,
  `image` VARCHAR(200) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_item_user_idx` (`user_id` ASC) VISIBLE,
  CONSTRAINT `fk_item_user`
    FOREIGN KEY (`user_id`)
    REFERENCES `auction`.`user` (`id`)
    ON DELETE CASCADE # ë¶€ëª¨ ë ˆì½”ë“œê°€ ì‚¬ë¼ì§€ë©´ ìì‹ ë ˆì½”ë“œë„ ì—°ì‡„ì ìœ¼ë¡œ ì‚­ì œ -> ë°ì´í„° ë¬´ê²°ì„±
    ON UPDATE CASCADE)
ENGINE = InnoDB
AUTO_INCREMENT = 32
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `auction`.`history`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `auction`.`prehistory` (
  `id` int NOT NULL AUTO_INCREMENT,
  `user_id` varchar(50) NOT NULL,
  `item_id` int NOT NULL,
  `endTime` datetime NOT NULL,
  PRIMARY KEY (`id`),
  KEY `fk_prehistory_user1_idx` (`user_id`),
  KEY `fk_prehistory_item1_idx` (`item_id`),
  CONSTRAINT `fk_prehistory_item1` FOREIGN KEY (`item_id`) REFERENCES `item` (`id`),
  CONSTRAINT `fk_prehistory_user1` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`)
)
ENGINE = InnoDB
AUTO_INCREMENT = 6
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;

CREATE USER 'user1'@'%' IDENTIFIED BY '1234';
GRANT ALL ON auction.* TO 'user1'@'%';
```
### Mysql Database Dockerfile ì‘ì„±
C:\miniProjectFront\Dockerfile
``` DockerFile
FROM mysql:8.0
# ENV MYSQL_ROOT_USER=root
ENV MYSQL_ROOT_PASSWORD=1234
COPY ./init.sql /docker-entrypoint-initdb.d 
# ì´ ë””ë ‰í† ë¦¬ ë‚´ì˜ SQL íŒŒì¼ì€ ì»¨í…Œì´ë„ˆê°€ ì²˜ìŒ ì‹œì‘ë  ë•Œ ìë™ìœ¼ë¡œ ì‹¤í–‰
```
### ì‘ì„±í•œ Dockerfileë¡œ mysql db ì´ë¯¸ì§€ ë¹Œë“œ

```shell
C:\Users\User\Desktop\miniProjectBack>docker image build -t mysql:1.0 -f Dockerfile-mysql .
# í•œ ë””ë ‰í† ë¦¬ë‚´ì— ë„ì»¤íŒŒì¼ì´ ì—¬ëŸ¬ê°œë©´ ì´ë ‡ê²Œ ì§ì ‘ ì§€ì •í•´ì¤˜ì•¼í•œë‹¤. 
[+] Building 1.7s (8/8) FINISHED                                                                         docker:default
 => [internal] load .dockerignore                                                                                  0.0s
.....
```

## Flask ì»¨í…Œì´ë„ˆí™”
### Flask Dockerfile ì‘ì„±
C:\miniProjectFront\Dockerfile
```DockerFile
FROM python:3.11
RUN apt-get update && apt-get install -y cron
WORKDIR /app
COPY . .
RUN pip install jwt #requirements.txtì— ì ì–´ì•¼í•œë‹¤ 
RUN pip install --no-cache-dir -r requirements.txt
RUN crontab -l | { cat; echo "* * * * * /usr/local/bin/python /app/historyUpdate.py >> /var/log/cron.log 2>&1"; } | crontab -
# í˜„ì¬ ì„¤ì •ëœ í¬ë¡  ì‘ì—… ëª©ë¡ì„ ê°€ì ¸ì™€ ìƒˆë¡œìš´ í¬ë¡  ì‘ì—…ì„ ëª©ë¡ì— ì¶”ê°€í•˜ëŠ” ì½”ë“œ
CMD ["sh", "-c", "cron && python app.py"]
# ì´ë¯¸ì§€ë¥¼ ìƒˆë¡œ ë¹Œë“œí•  ë•Œ cron ì‹¤í–‰ì´ í•„ìš”í•œ ê²ƒì´ê³  í•œë²ˆì´ë¼ë„ cronì´ ì‹¤í–‰ë˜ì—ˆë‹¤ë©´ CMDë¶€ë¶„ì— ë„£ì„ í•„ìš”ëŠ” ì—†ë‹¤

```

### ì‘ì„±í•œ Dockerfileë¡œ  flask ì´ë¯¸ì§€ ë¹Œë“œ
```shell
C:\Users\User\Desktop\miniProjectBack>docker image build -t flask:1.0 -f Dockerfile-flask .

# í•œ ë””ë ‰í† ë¦¬ë‚´ì— ë„ì»¤íŒŒì¼ì´ ì—¬ëŸ¬ê°œë©´ ì´ë ‡ê²Œ ì§ì ‘ ì§€ì •í•´ì¤˜ì•¼í•œë‹¤. 

[+] Building 31.1s (6/12)                                                                                docker:default
 => [internal] load build definition from Dockerfile-flask                                                         0.0s
 => => transferring dockerfile: 465B                                                                               0.0s
 ...
```

## React ì»¨í…Œì´ë„ˆí™”
### React Dockerfile ì‘ì„±
C:\miniProjectBack\Dockerfile
```Dockerfile
FROM    node AS builder
RUN     mkdir /my-app
WORKDIR /my-app
COPY    . .
RUN     npm install
RUN     npm run build


FROM    nginx AS runtime
COPY    --from=builder /my-app/build/ /usr/share/nginx/html/
CMD     ["nginx", "-g", "daemon off;"]
```

### ì‘ì„±í•œ Dockerfileë¡œ React ì´ë¯¸ì§€ ë¹Œë“œ

```SHELL
C:\Users\User\Desktop\miniProjectFront>docker image build -t react:1.0 .

[+] Building 6.0s (8/15)                                                                                 ...
```

### ë¹Œë“œëœ ì´ë¯¸ì§€ë“¤ í™•ì¸
C:\Users\User\Desktop\miniProjectFront>docker image ls
```
REPOSITORY                                TAG                                        IMAGE ID       CREATED         SIZE
flask                                     1.0                                        c673b4d2fbd5   5 minutes ago   1.34GB
react                                     1.0                                        c0ab8f938e1d   17 hours ago    190MB
mysql                                     1.0                                        a8d83556830d   17 hours ago    582MB
```

## Mysql Databaseì™€ Flask Backend ê²°í•©í•˜ê¸°
- Docker-compose.yaml ì‘ì„±í•´ì„œ ê²°í•©í•˜ê¸° 
- ë„¤íŠ¸ì›Œí¬ ìƒì„± í›„ Databaseì™€ Flaskë¥¼ ê°™ì€ ë„¤íŠ¸ì›Œí¬ì— ë°°ì •

ë‘˜ ì¤‘ ë„¤íŠ¸ì›Œí¬ ìƒì„±í•´ì„œ ì»¨í…Œì´ë„ˆë“¤ì„ ë°°ì •í•˜ëŠ” ë°©ë²• ì±„íƒ

## ë„¤íŠ¸ì›Œí¬ ìƒì„±í•˜ê¸° 
C:\Users\User\Desktop\miniProjectFront>docker network create test
```
862453dd5b76ea62c6cfac2871638f23e894b516866984a804753111fdff12ff
```
## ìƒì„±í•œ ë„¤íŠ¸ì›Œí¬ í™•ì¸
C:\Users\User\Desktop\miniProjectFront>docker network ls
```
NETWORK ID     NAME        DRIVER    SCOPE
59aa4a23c272   bridge      bridge    local
ff5b36b6f513   host        host      local
862453dd5b76   test        bridge    local # ìƒì„±ëœ ë„¤íŠ¸ì›Œí¬
1b11b7589d74   mynetwork   bridge    local
c5c8c316b476   network-a   bridge    local
e161b435858e   none        null      local
```
## ìƒì„±í–ˆë˜ Mysql ì»¨í…Œì´ë„ˆ CLI í™˜ê²½ì—ì„œ ì‹¤í–‰ 
``` shell
C:\Users\User\Desktop\miniProjectFront>docker container exec -it ì»¨í…Œì´ë„ˆëª… /bin/bash
					       				
bash-4.4# mysql -u root -p
Enter password:
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 8
Server version: 8.0.35 MySQL Community Server - GPL

Copyright (c) 2000, 2023, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> use auction
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
mysql> show tables;
+-------------------+
| Tables_in_auction |
+-------------------+
| history           |
| item              |
| prehistory        |
| user              |
+-------------------+
4 rows in set (0.00 sec)

mysql> desc history
    -> ;
+---------+-------------+------+-----+---------+----------------+
| Field   | Type        | Null | Key | Default | Extra          |
+---------+-------------+------+-----+---------+----------------+
| id      | int         | NO   | PRI | NULL    | auto_increment |
| user_id | varchar(50) | NO   |     | NULL    |                |
| item_id | int         | NO   |     | NULL    |                |
+---------+-------------+------+-----+---------+----------------+
3 rows in set (0.00 sec)
```
## ìƒì„±í–ˆë˜ Networkì— ì»¨í…Œì´ë„ˆë“¤ ê°ê° ë°°ì •
``` shell
C:\Users\User\Desktop\miniProjectFront>docker container run -d -p 5000:5000 --network test --name flask flask:1.0

3fb802a031d42ae70d23933a8effc952f7cd34331d06481766f69b31905b6681

C:\Users\User\Desktop\miniProjectFront>docker container run -d --network test --name mysql mysql:1.0

# ê°™ì€ ë„¤í¬ì›Œí¬ì—ì„œ ì‹¤í–‰í•¨ìœ¼ë¡œ ì„œë²„ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ê·¼í•  ë•Œ IP ì£¼ì†Œë¥¼ ì§ì ‘ ì‚¬ìš©í•  í•„ìš”ê°€ ì—†ì–´ì§€ë©°, ì»¨í…Œì´ë„ˆ ì´ë¦„ìœ¼ë¡œ ì„œë¡œ í†µì‹  ê°€ëŠ¥
fdda530a8261b26d81466d035825c605105e53c89616e14bceef64ede3855eb7

C:\Users\User\Desktop\miniProjectFront>docker container run -d -p 3000:80 --network mynetwork --name react react:1.0

c4719ce8fd73681f6786b81c66053fa3512cb86d594b1fdad3f25a66e08d3d3a

C:\Users\User\Desktop\miniProjectFront>docker container ls

CONTAINER ID   IMAGE                       COMMAND                   CREATED              STATUS              PORTS                    NAMES
fdda530a8261   mysql:1.0                   "docker-entrypoint.sâ€¦"   6 seconds ago        Up 5 seconds        3306/tcp, 33060/tcp      mysql
c4719ce8fd73   react:1.0                   "/docker-entrypoint.â€¦"   About a minute ago   Up About a minute   0.0.0.0:3000->80/tcp     react
3fb802a031d4   flask:1.0                   "sh -c 'cron && pythâ€¦"   3 minutes ago        Up 3 minutes        0.0.0.0:5000->5000/tcp   flask
```
## Docker Registryì— ì´ë¯¸ì§€ë¥¼ í‘¸ì‹œ
- ojinga0519ì€ pushí•  Docker Registry ì£¼ì†Œ
- mysql:1.0ëŠ” ë¡œì»¬ì— ë¹Œë“œí•œ ì‹¤ì œ ì´ë¯¸ì§€ ì´ë¦„
```
docker tag mysql:1.0 ojinga0519/mysql:1.0
docker image push ojinga0519/mysql:1.0

docker tag flask:1.0 ojinga0519/myflask:1.0
docker image push ojinga0519/myflask:1.0

docker tag react:1.0 ojinga0519/myreact:1.0
docker image push ojinga0519/myreact:1.0
```
![1699408118271](image/README/1699408118271.png)

# Kubernetes - Docker ì»¨í…Œì´ë„ˆë¥¼ í´ëŸ¬ìŠ¤í„°ì—ì„œ ì‹¤í–‰í•˜ê³  ê´€ë¦¬
## ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ì…‹ì—…
### ê°€ìƒë¨¸ì‹  ìƒì„± 
- ë¡œì»¬ í™˜ê²½ì—ì„œ Kubernetesë¥¼ì‚¬ìš©í•˜ëŠ” ë„êµ¬ ì¤‘ í•˜ë‚˜ë¡œ Vagrant ì‚¬ìš© 
- Vagrantë¡œ ê°€ìƒ ë¨¸ì‹ ì„ ê´€ë¦¬í•˜ê³  ê·¸ ì•ˆì—ì„œ Kubernetes í´ëŸ¬ìŠ¤í„°ë¥¼ ì‹¤í–‰
- ë§ˆìŠ¤í„° ë…¸ë“œëŠ” í´ëŸ¬ìŠ¤í„°ì˜ ì œì–´ë¥¼ ë‹´ë‹¹í•˜ê³ , ì›Œì»¤ ë…¸ë“œëŠ” ì‹¤ì œë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰ ë° ê´€ë¦¬. 
```shell

c:\kubernetis\vagrant-kubeadm-kubernetes>vagrant up

Bringing machine 'master' up with 'virtualbox' provider...
Bringing machine 'node01' up with 'virtualbox' provider...
Bringing machine 'node02' up with 'virtualbox' provider...
==> master: Checking if box 'bento/ubuntu-22.04' version '202309.08.0' is up to date...
==> master: Machine already provisioned. Run `vagrant provision` or use the `--provision`
==> master: flag to force provisioning. Provisioners marked to run always will still run.
==> node01: Checking if box 'bento/ubuntu-22.04' version '202309.08.0' is up to date...
==> node01: Machine already provisioned. Run `vagrant provision` or use the `--provision`
==> node01: flag to force provisioning. Provisioners marked to run always will still run.
==> node02: Checking if box 'bento/ubuntu-22.04' version '202309.08.0' is up to date...
==> node02: Machine already provisioned. Run `vagrant provision` or use the `--provision`
==> node02: flag to force provisioning. Provisioners marked to run always will still run.
```
### master-node ì— ì ‘ì†
c:\kubernetis\vagrant-kubeadm-kubernetes>vagrant ssh master
```
Welcome to Ubuntu 22.04.3 LTS (GNU/Linux 5.15.0-83-generic x86_64)
```
- Kubernetesì—ì„œ YAML íŒŒì¼ì€ ë¦¬ì†ŒìŠ¤, ë””í”Œë¡œì´ë¨¼íŠ¸ ë° ì„œë¹„ìŠ¤ë¥¼ ì •ì˜í•˜ëŠ” ë° ì‚¬ìš©
- YAMLíŒŒì¼ì€ ë“¤ì—¬ì“°ê¸°ì— ë§¤ìš° ìœ ì˜í•´ì•¼í•œë‹¤. 

### ë³¼ë¥¨ ê¸°ëŠ¥ ì¶”ê°€
- emptyDir 
  - íŒŒë“œê°€ ì‹¤í–‰ë˜ëŠ” í˜¸ìŠ¤íŠ¸ì˜ ë””ìŠ¤í¬ë¥¼ ì„ì‹œë¡œ ì»¨í…Œì´ë„ˆì— ë³¼ë¥¨ìœ¼ë¡œ í• ë‹¹í•´ì„œ ì‚¬ìš©
  - íŒŒë“œê°€ ì‚¬ë¼ì§€ë©´ ì„ì‹œ ë³¼ë¥¨ì˜ ë°ì´í„°ë„ í•¨ê»˜ ì‚¬ë¼ì§„ë‹¤
  - ëŒ€ìš©ëŸ‰ ë°ì´í„° ê³„ì‚°ì— ì‚¬ìš©
- HostPath: 
  - íŒŒë“œê°€ ì‹¤í–‰ëœ í˜¸ìŠ¤íŠ¸ì˜ ì‹¤ì œ íŒŒì¼ì´ë‚˜ ë””ë ‰í„°ë¦¬ë¥¼ íŒŒë“œì— ë§ˆìš´íŠ¸
- NFS: ì—¬ëŸ¬ í˜¸ìŠ¤íŠ¸ì—ì„œ ë§ˆìš´íŠ¸ ê°€ëŠ¥í•œ ë„¤íŠ¸ì›Œí¬ íŒŒì¼ ì‹œìŠ¤í…œì„ í†µí•´ ë°ì´í„°ë¥¼ ê³µìœ 
- PersistentVolume:ë„¤íŠ¸ì›Œí¬ ë³¼ë¥¨ì„ í™œìš©í•´ ë°ì´í„°ë¥¼ ì €ì¥


- HostPath + PersistentVolumeì„ ì„ íƒ
  - ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•´ ë‹¤ë¥¸ hostì—ê²Œë„ ë°ì´í„°ë¥¼ ê³µìœ í•˜ê³ , ë¡œë“œ ë°¸ëŸ°ì„œì™€ë„ í˜¸í™˜ì„±ì´ ë†’ì•„ ì™¸ë¶€ ë…¸ì¶œì— ì í•©í•œ NFSë¡œ ë°”ê¾¸ëŠ”ê²Œ ë‚˜ì„ë“¯
  -  MySQL ë°ì´í„°ë² ì´ìŠ¤ê°€ ì´ˆê¸°í™”ë˜ëŠ” ë¬¸ì œê°€ ë°œìƒ

#### PersistentVolumeì„ ìƒì„±
- í˜¸ìŠ¤íŠ¸ ë…¸ë“œì˜ /data/mysql ê²½ë¡œë¥¼ ì‚¬ìš©í•˜ì—¬ PersistentVolumeì„ ìƒì„±í•˜ê³ , í•´ë‹¹ ê²½ë¡œì— ìˆëŠ” ë°ì´í„°ë¥¼ ìœ ì§€
/home/vagrant/mysql-pv.yaml
```yaml
apiVersion: v1
kind: PersistentVolume
metadata:
  name: mysql-pv
spec:
  capacity:
    storage: 2Gi            
  accessModes:
    - ReadWriteOnce         # í•˜ë‚˜ì˜ íŒŒë“œì— ì˜í•´ì„œë§Œ ë§ˆìš´íŠ¸(default ê°’)
  hostPath: #í˜¸ìŠ¤íŠ¸ ê²½ë¡œë¥¼ ì œê³µ
    type: DirectoryOrCreate # í•´ë‹¹ ë””ë ‰í„°ë¦¬ë¥¼ íƒìƒ‰í•˜ê³ , ì—†ìœ¼ë©´ ìƒì„±
    path: /data/mysql       # ì›Œì»¤ ë…¸ë“œì—ì„œ ë³¼ë¥¨ì´ ìƒì„±ë  ë””ë ‰í„°ë¦¬
```

#### PersistentVolume í¬ë ˆì„ ìƒì„±()
- ê°œì¸ì  ê¶ê¸ˆì¦ : ë”°ë¡œ PersistentVolumeì„ ëª…ì‹œì•ˆí•´ì¤˜ë„ ê´œì°®ë‚˜ ì‹¶ì—ˆë‹¤
  - í•„ìš”í•œ ìŠ¤í† ë¦¬ì§€ì§€ë¥¼ ë™ì ìœ¼ë¡œ í”„ë¡œë¹„ì €ë‹
/home/vagrant/mysql-pvc.yaml
```yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: mysql-pvc
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 2Gi
```
## Kubernetes ì„œë¹„ìŠ¤ íƒ€ì…
- ClusterIP 
  - ê¸°ë³¸ì ì¸ ì„œë¹„ìŠ¤ ìœ í˜•ìœ¼ë¡œ, í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥í•œ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.
- NodePort 
  - ì™¸ë¶€ì—ì„œ íŒŒë“œë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ì„œë¹„ìŠ¤ ìœ í˜• ì¤‘ í•˜ë‚˜
  - ì™¸ë¶€ì—ì„œ íŒŒë“œì— ì§ì ‘ ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ í•´ì£¼ë©°, ì™¸ë¶€ í¬íŠ¸ë¥¼ ì§ì ‘ ì„¤ì • ê°€ëŠ¥
  - í¬íŠ¸ ì¶©ëŒ ë°œìƒ ê°€ëŠ¥ì„±, íŠ¸ë˜í”½ ë¶„ì‚° ì˜ ì•ˆë¨
- LoadBalancer 
  - í´ë¼ìš°ë“œ í”Œë«í¼ì—ì„œ ì œê³µí•˜ëŠ” ë¡œë“œë²¨ëŸ°ì„œë¥¼ ë™ì ìœ¼ë¡œ í”„ë¡œë¹„ì €ë‹í•´ íŒŒë“œì— ì—°ê²°
	- ì™¸ë¶€ì—ì„œ íŒŒë“œë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í´ë¼ìš°ë“œ ë¡œë“œ ë°¸ëŸ°ì„œë¥¼ í†µí•´ íŠ¸ë˜í”½ì„ ë¶„ì‚°
	- ì¼ë°˜ì ìœ¼ë¡œ AWS, GCP ë“±ê³¼ ê°™ì€ í´ë¼ìš°ìŠ¤ í”Œë«í¼ í™˜ê²½ì—ì„œ ì‚¬ìš©(ë¹„ìš© ë°œìƒ ê°€ëŠ¥)
    - on-premise í™˜ê²½ì´ê¸°ë•Œë¬¸ì— MetalLBë¥¼ ì„¤ì¹˜í•´ ë¡œì»¬ì—ì„œë„ ë¡œë“œ ë°¸ëŸ°ì‹± ê°€ëŠ¥í•˜ê²Œí•¨
- ExternalName 
  - ì™¸ë¶€ ì„œë¹„ìŠ¤ë¥¼ ì¿ ë²„ë„¤í‹°ìŠ¤ ë‚´ë¶€ì—ì„œ í˜¸ì¶œí•˜ê³ ì í•  ë•Œ ì‚¬ìš© 
	- í´ëŸ¬ìŠ¤í„°ì—ì„œ ì™¸ë¶€ IP ì£¼ì†Œì— ì„œë¹„ìŠ¤ì˜ ì´ë¦„ìœ¼ë¡œ ì ‘ê·¼
  
## mysql-deployment.yaml íŒŒì¼ ì‘ì„±
/home/vagrant/mysql-deployment.yaml
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: mysql-deployment
spec:
  replicas: 1 # ë°°í¬ì˜ ë³µì œë³¸ ìˆ˜
  selector:
    matchLabels:
      app: mysql
  template:
    metadata:
      name: mysql-pod
      labels:
        app: mysql
    spec:
      containers:
      - name: mysql
        image: docker.io/ojinga0519/mysql:1.0
        env:
        - name: MYSQL_ROOT_PASSWORD
          value: "1234"        
        ports:
        - containerPort: 3306
        volumeMounts: #ë³¼ë¥¨ ë§ˆìš´íŠ¸ ì„¤ì •
        - name: mysql-data
          mountPath: /var/lib/mysql  
          subPath: mysql
      imagePullSecrets:
      - name: regcred
      volumes:
      - name: mysql-data
        persistentVolumeClaim:
          claimName: mysql-pvc
---
apiVersion: v1
kind: Service
metadata:
  name: mysql-service
spec:
  type: LoadBalancer        # ì„œë¹„ìŠ¤ê°€ ì™¸ë¶€ë¡œ ë…¸ì¶œë˜ë„ë¡ ë¡œë“œ ë°¸ëŸ°ì„œë¥¼ ìƒì„±í•˜ë„ë¡ ì§€ì •
  ports:                    
  - name: mysql
    port: 3306              # ì™¸ë¶€ ë…¸ì¶œ í¬íŠ¸
    targetPort: 3306        # ë‚´ë¶€ íŒŒë“œì˜ í¬íŠ¸
  selector:                 
    app: mysql              # í•´ë‹¹ ì„œë¹„ìŠ¤ê°€ íŒŒë“œì˜ app: mysql ë¼ë²¨ì„ ê°€ì§„ íŒŒë“œì— ì—°ê²°
```

## flask-deployment.yaml íŒŒì¼ ì‘ì„±

/home/vagrant/flask-deployment.yaml
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: flask-deployment
spec:
  replicas: 1
  selector:
    matchLabels:
      app: flask
  template:
    metadata:
      name: flask-pod
      labels:
        app: flask
    spec:
      containers:
      - name: flask
        image: docker.io/ojinga0519/myflask:1.0
        ports:
        - containerPort: 5000
      imagePullSecrets:
      - name: mysecret  
---       
apiVersion: v1
kind: Service
metadata:
  name: flask-service
spec:
  type: LoadBalancer
  loadBalancerIP: 10.0.0.4 # ë¡œë“œ ë°¸ëŸ°ì„œì— íŠ¹ì • IP ì£¼ì†Œë¥¼ í• ë‹¹í•˜ì—¬ ì™¸ë¶€ì—ì„œ ì´ IPë¥¼ í†µí•´ ì„œë¹„ìŠ¤ì— ì—°ê²°
  ports:
  - name: flask
    port: 5000
    targetPort: 5000
  selector:
    app: flask
```
## react-deployment.yaml íŒŒì¼ ì‘ì„±
/home/vagrant/react-deployment.yaml
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: react-deployment
spec:
  replicas: 1
  selector:
    matchLabels:
      app: react
  template:
    metadata:
      name: react-pod
      labels:
        app: react
    spec:
      containers:
      - name: react
        image: docker.io/ojinga0519/myreact:1.0
        ports:
        - containerPort: 3000
      imagePullSecrets:
      - name: regcred 
---       
apiVersion: v1
kind: Service
metadata:
  name: react-service
spec:
  type: LoadBalancer  
  ports:             
  - name: react
    port: 3000       
    targetPort: 80      
  selector:
    app: react
```    

### POD ê°„ í†µì‹  êµ¬í˜„
```
vagrant@master-node:~$ kubectl get all
NAME                 TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE
service/kubernetes   ClusterIP   172.17.0.1   <none>        443/TCP   17d
```

#### deployment/service ë°°í¬
```shell
vagrant@master-node:~$ kubectl apply -f mysql-deployment.yaml
deployment.apps/mysql-deployment created
service/mysql-service created
vagrant@master-node:~$ kubectl apply -f flask-deployment.yaml
deployment.apps/flask-deployment created
service/flask-service created
vagrant@master-node:~$ kubectl apply -f mysql-deployment.yaml
deployment.apps/mysql-deployment unchanged
service/mysql-service unchanged
vagrant@master-node:~$ kubectl get all
NAME                                    READY   STATUS    RESTARTS   AGE
pod/flask-deployment-db55dcbd7-nwbks    1/1     Running   0          14s
pod/mysql-deployment-5b587d9457-gcqg7   1/1     Running   0          19s

NAME                    TYPE           CLUSTER-IP      EXTERNAL-IP   PORT(S)          AGE
service/flask-service   LoadBalancer   172.17.53.73    10.0.0.4      5000:31274/TCP   14s
service/kubernetes      ClusterIP      172.17.0.1      <none>        443/TCP          17d
service/mysql-service   LoadBalancer   172.17.43.138   10.0.0.3      3306:30999/TCP   19s

NAME                               READY   UP-TO-DATE   AVAILABLE   AGE
deployment.apps/flask-deployment   1/1     1            1           14s
deployment.apps/mysql-deployment   1/1     1            1           19s

NAME                                          DESIRED   CURRENT   READY   AGE
replicaset.apps/flask-deployment-db55dcbd7    1         1         1       14s
replicaset.apps/mysql-deployment-5b587d9457   1         1         1       19s
vagrant@master-node:~$ kubectl apply -f react-deployment.yaml
deployment.apps/react-deployment created
service/react-service created
```

#### PODë“¤ External IPì™€ í†µì‹  í™•ì¸ 
```
vagrant@master-node:~$ kubectl get all
NAME                                    READY   STATUS    RESTARTS   AGE
pod/flask-deployment-db55dcbd7-nwbks    1/1     Running   0          55s
pod/mysql-deployment-5b587d9457-gcqg7   1/1     Running   0          60s
pod/react-deployment-65d6df987c-4lr5z   1/1     Running   0          5s

NAME                    TYPE           CLUSTER-IP      EXTERNAL-IP   PORT(S)          AGE
service/flask-service   LoadBalancer   172.17.53.73    10.0.0.4      5000:31274/TCP   55s
service/kubernetes      ClusterIP      172.17.0.1      <none>        443/TCP          17d
service/mysql-service   LoadBalancer   172.17.43.138   10.0.0.3      3306:30999/TCP   60s
service/react-service   LoadBalancer   172.17.27.20    10.0.0.5      3000:32307/TCP   5s

NAME                               READY   UP-TO-DATE   AVAILABLE   AGE
deployment.apps/flask-deployment   1/1     1            1           55s
deployment.apps/mysql-deployment   1/1     1            1           60s
deployment.apps/react-deployment   1/1     1            1           5s

NAME                                          DESIRED   CURRENT   READY   AGE
replicaset.apps/flask-deployment-db55dcbd7    1         1         1       55s
replicaset.apps/mysql-deployment-5b587d9457   1         1         1       60s
replicaset.apps/react-deployment-65d6df987c   1         1         1       5s
```

